!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).frameport={})}(this,(function(e){"use strict";const t=e=>{let{html:t,style:r,css:o,code:a,javascript:n,headers:s=[]}=e;return o=(e=>e?`<link rel="stylesheet" type="text/css" href="${e}" />`:"")(o),n=(e=>e?`<script src="${window.location.protocol}//${window.location.host}${e}"><\/script>`:"")(n),a=(e=>e?`<script>${e}<\/script>`:"")(a),r=(e=>e?`<style type="text/css">\n    ${e}\n  </style>`:"")(r),`<!DOCTYPE html><html>\n  <head>\n    ${s.join("\n")}\n    ${r}\n    ${o}\n  </head>\n  <body>\n    ${t||""}\n    ${n}\n    ${a}\n  </body>\n</html>`},r=e=>((e,t)=>{const r=new Blob([e],{type:t});return URL.createObjectURL(r)})(t(e),"text/html"),o=async(e,t)=>{!e||!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&0===t.length||0===Object.keys(t).length&&t.constructor===Object||(await new Promise(requestAnimationFrame),Array.isArray(t)?t.forEach((t=>e.style[t.key]=t.value)):Object.keys(t).forEach((r=>e.style[r]=t[r])))},a=e=>{const{className:t,height:a,width:n}=e,s=r(e),i=document.createElement("iframe"),c={};return i.src=s,i.setAttribute("data-rde-iframe",""),t&&""!==t?i.classList.add(t):c.border="none",c.width=`${n}px`,a&&(c.height=`${a}px`),o(i,c),i},n={clip:"rect(1px, 1px, 1px, 1px)",height:"1px",margin:"0",overflow:"hidden",position:"absolute",width:"1px"},s=['<meta charset="utf-8" />','<meta name="robots" content="none" />','<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />','<meta name="viewport" content="width=device-width, initial-scale=1" />'],i=(e,t)=>{if(!e||!t||t&&0===Object.keys(t).length)return;const{html:r,viewports:s,templateElement:i}=t;r&&""!==r&&(console.log(i),o(i,n),s?((e,t)=>{const{viewports:r}=t;if(!r||""===r)return;let o=[];-1!==r.indexOf(",")?o=[...o,...r.split(",")]:o.push(r),o.forEach((r=>{const o=r.split("x"),n=o[0],s=o[1],i=a({...t,height:s,width:n});e.insertAdjacentElement("afterend",i)}))})(e,t):((e,t)=>{const{width:r}=t;if(!r)return;const o=a(t);e.append(o)})(e,t))},c=e=>{let t=[...s];return e&&(Array.isArray(e)?t=[...t,...e]:-1!==e.indexOf(",")?t=[...t,...e.split(",")]:""!==e&&t.push(e)),t},l=e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{e()})):e()},m=()=>{const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.intersectionRatio>0){const{dataset:{frameportTemplate:r,frameportVh:o,frameportVw:a,frameportCss:n,frameportStyle:s,frameportCode:l,frameportJs:m,frameportClass:p,frameportHeaders:d,frameportViewports:f}}=e.target;let h=e.target.innerHTML,u=e.target;if(r){const e=document.querySelector(r);e&&(h=e.innerHTML,u=e)}const y={templateSelector:r,templateElement:u,height:o,width:a,html:h,css:n,style:s,code:l,javascript:m,className:p,headers:c(d),viewports:f};i(e.target,y),t.unobserve(e.target)}}))}));document.querySelectorAll("[data-frameport]").forEach((t=>{e.observe(t)}))},p=e=>{window.frameport=e},d=e=>{const t=document.currentScript;if(t){const r=t.getAttribute("src");r&&-1!==r.indexOf("frameport.js")&&(t.hasAttribute("data-manual")?p(e):t.hasAttribute("data-instant")?e():t.hasAttribute("data-dom")?l(e):t.hasAttribute("data-lazy")?m():l(e))}},f={domReady:l,lazy:m,manual:p,activate:d},h=()=>{document.querySelectorAll("[data-frameport-iframe]").forEach((e=>e.remove()));const e=document.querySelectorAll("[data-frameport]");console.log(e),e.forEach((e=>{const{dataset:{frameportTemplate:t,frameportVh:r,frameportVw:o,frameportCss:a,frameportStyle:n,frameportCode:s,frameportJs:l,frameportClass:m,frameportHeaders:p,frameportViewports:d}}=e;let f=e.innerHTML,h=e;if(t){const e=document.querySelector(t);e&&(f=e.innerHTML,h=e)}const u={templateSelector:t,templateElement:h,height:r,width:o,html:f,css:a,style:n,code:s,javascript:l,className:m,headers:c(p),viewports:d};i(e,u)}))};d(h),e.default=h,e.modes=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=frameport.js.map
